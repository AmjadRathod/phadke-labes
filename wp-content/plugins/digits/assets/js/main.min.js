function verifyOTPbilling(e){(2==e?document.getElementById("dig_billing_signupwithpassword"):document.getElementById("dig_billing_validate_button")).click()}jQuery(function(){var precode,dig_reg_wp_elem=jQuery("#dig_reg_wp_elem");dig_reg_wp_elem.length&&(dig_reg_wp_elem=dig_reg_wp_elem.closest("form"),0===dig_reg_wp_elem.find(".dig_wc_reg_form_end").length?(dig_reg_wp_elem.addClass("wp_reg"),dig_reg_wp_elem.find(".bbp-username").find("#user_login").attr("id","user_uname")):dig_reg_wp_elem.find(".dig_wp_bp_fields").remove());var dig_login_wp_elem=jQuery("#dig_login_wp_elem");dig_login_wp_elem.length&&0<dig_mdet.login_mobile_accept&&(dig_login_wp_elem=dig_login_wp_elem.closest("form"),0===dig_login_wp_elem.find(".loginuname").length?(dig_login_wp_elem.addClass("wp_login"),dig_login_wp_elem.find("input[type='text']").first().attr({id:"username",nan:1})):dig_login_wp_elem.find(".dig_bb_wp_otp_field").remove());var akCallback=-1;if(jQuery("#digit_emailaddress").closest("form").addClass("register"),jQuery("#wc_code_dig").closest("form").addClass("login"),jQuery("#digits_wc_code").closest("form").addClass("woocommerce-ResetPassword"),1!=dig_log_obj.dig_dsb){var loader=jQuery(".dig_load_overlay"),tokenCon,reg_email=jQuery("#reg_email"),mailsecond=jQuery(".dig_wc_mailsecond"),mailSecondLabel=jQuery("#dig_secHolder"),secondmailormobile=jQuery("#secondmailormobile"),user_login=jQuery("#user_login"),ew=30;jQuery('input[id="account_email"]').each(function(e){jQuery(this).parent().find("label").find("span").remove()});var dig_sortorder=dig_mdet.dig_sortorder,register=jQuery(".dig_wc_reg_form").closest(".register");if(dig_sortorder.length){register.find("#reg_username").closest(".form-row").attr("id","dig_cs_username").addClass("dig-custom-field"),register.find("#reg_password").closest(".form-row").attr("id","dig_cs_password").addClass("dig-custom-field"),0<dig_mdet.mobile_accept?register.find("#reg_email").parent().attr({id:"dig_cs_mobilenumber",class:"dig-custom-field woocommerce-FormRow--wide form-row form-row-wide"}):register.find("#reg_email").parent().attr({id:"dig_cs_email",class:"dig-custom-field woocommerce-FormRow--wide form-row form-row-wide"});var sortorder=dig_sortorder.split(","),digits_register_inputs=register;digits_register_inputs.find(".dig-custom-field").sort(function(e,i){var t=jQuery.inArray(e.id,sortorder),r=jQuery.inArray(i.id,sortorder);return t<r?-1:r<t?1:0}).prependTo(digits_register_inputs)}var c=jQuery(".ihc-form-create-edit");if(c.length&&0<dig_mdet.mobile_accept){var f=jQuery(".iump-register-form").find("#createuser"),i_ccode=dig_mdet.uccode;f.find("input[name='phone']").attr({"data-dig-main":1,reg:2,"data-skip-label":1,id:"username",mob:1,countryCode:i_ccode,nan:1}),jQuery('<input type="hidden" id="dig_ihc_ea_code" name="code"/><input type="hidden" id="dig_ihc_ea_csrf" name="csrf"/><div id="dig_ihc_mobotp" class="iump-form-line-register iump-form-text" style="display:none;"><input value="" id="digits_otp_ihc" name="digit_otp" placeholder="'+dig_mdet.OTP+'" type="text" style="padding-left:10px !important;">').insertBefore(f.find("input[type='submit']").parent())}var wcform=jQuery("#wc_dig_reg_form").closest("form"),wc_checkout=jQuery(".woocommerce-form-login");wcform.length&&(wcform.find('input[type="password"]').closest(".woocommerce-FormRow").remove(),wcform.find('input[name="login"]').remove(),wcform.find(".woocommerce-LostPassword").remove(),wcform.find("#rememberme").closest("label").remove(),wcform.find("#username").attr("mob",1),wc_checkout.length&&(wc_checkout.find('input[type="password"]').parent().remove(),wc_checkout.find(".form-row-first").removeClass("form-row-first"),wc_checkout.find(".lost_password").remove(),wc_checkout.find("#rememberme").closest("label").remove(),wc_checkout.find('[name="login"]').remove(),wc_checkout.find("#username").attr("mob",1)));var uc=jQuery("#dig_wc_check_page");if(uc.length){uc=uc.parent();var createAccount=uc.find(".create-account");createAccount=createAccount.last(),createAccount.length&&(createAccount.find("#username").attr({"f-mob":1,reg:1,"data-dig-mob":1}),2==dig_mdet.mobile_accept&&createAccount.find("#username").attr({"data-dig-mob":1}),jQuery(".wc_check_dig_custfields").appendTo(createAccount))}var dismissLoader=!1,dig_billing_password=jQuery("#billing_account_password"),um_register=jQuery(".um-register");um_register.length&&um_register.find(".um-field-mobile_number").find("input").attr("id","username");var um_login=jQuery(".um-login");um_login.length&&um_login.find(".um-field-mobile_number").find("input").attr("id","username"),jQuery('input[id="username"]').each(function(e){update_username_field(jQuery(this))}),jQuery("#wc-pos-actions").find("#add_customer_to_register").on("click",function(){setTimeout(function(){update_username_field(jQuery("#username_field").find("#username"))},100)}),jQuery(".dig_update_hidden").on("keyup change",function(){var e=jQuery(this).attr("data-dig-main"),i=jQuery(this).closest(".digcon").find("#username").val(),t=jQuery(this).val();jQuery.isNumeric(i)&&0<i.length&&0<t.length&&jQuery.isNumeric(t)?jQuery("#"+e).val(t+""+i):jQuery("#"+e).val("")}),jQuery('input[id="reg_email"]').each(function(e){var i,r=jQuery(this),o=r.parent(),t=" <span class=required>*</span>";if(1==dig_mdet.mail_accept&&1==dig_mdet.mobile_accept)i=dig_mdet.emailormobile;else if(0<dig_mdet.mobile_accept)i=dig_mdet.MobileNumber,1==dig_mdet.mobile_accept&&(t=" <span class=required>("+dig_mdet.optional+")</span>");else{if(1!=dig_mdet.mail_accept)return;i=dig_mdet.email}o.children("label").html(i+t),r.attr("placeholder")&&r.attr("placeholder",i),r.wrap('<div class="digcon"></div>').before('<div class="dig_wc_countrycodecontainer dig_wc_registercountrycodecontainer"><input type="text" name="digfcountrycode" class="input-text countrycode dig_wc_registercountrycode" value="'+dig_mdet.uccode+'" maxlength="6" size="3" placeholder="'+dig_mdet.uccode+'"/></div>'),r.bind("keyup change",function(e){var i=o.find(".dig_wc_countrycodecontainer"),t=i.find("input");jQuery.isNumeric(r.val())?(i.css({display:"inline-block"}),t.trigger("keyup")):(i.hide(),jQuery(this).css({"padding-left":"0.75em"})),updateMailSecondLabel(r)});jQuery(this).closest("form");r.attr({type:"text"}),setTimeout(function(){r.trigger("keyup")})});var usernameid=jQuery("#username"),reg_input=reg_email.parent();user_login.parent().children("label").html(dig_mdet.emailormobile+" <span class=required>*</span>"),jQuery('input[id="secondmailormobile"]').each(function(e){2!=dig_mdet.mail_accept&&2!=dig_mdet.mobile_accept&&(sRegMail=jQuery(this),sRegMail.addClass(),sRegMail.wrap('<div class="digcon"></div>').before('<div class="dig_wc_countrycodecontainer dig_wc_registersecondcountrycodecontainer"><input type="text" name="digsfcountrycode2" class="input-text countrycode dig_wc_registersecondcountrycode" value="'+dig_mdet.uccode+'" maxlength="6" size="3" placeholder="'+dig_mdet.uccode+'"/></div>'),sRegMail.attr("placeholder")&&sRegMail.attr("placeholder",dig_mdet.emailormobile),sRegMail.bind("keyup change",function(){var e=jQuery(this).parent().find(".dig_wc_registersecondcountrycodecontainer"),i=e.find("input");jQuery.isNumeric(jQuery(this).val())&&!jQuery.isNumeric(reg_email.val())?(e.css({display:"inline-block"}),i.trigger("keyup")):(e.hide(),jQuery(this).css({"padding-left":"0.75em"}))}),setTimeout(function(){sRegMail.trigger("keyup")}))}),jQuery(".dig_wc_registersecondcountrycode").bind("keyup change",function(e){var i=jQuery(this),t=i.val(),r=t.length,o=i.parent().parent().find("input#secondmailormobile");++r<2&&(r=2),i.attr("size",r),0==t.trim().length&&i.val("+"),o.css({"padding-left":mobilePaddingLeft(i.outerWidth()+ew/2+"px")},"fast",function(){})}),user_login.attr("disabled")||(user_login.wrap('<div class="digcon"></div>').before('<div class="dig_wc_countrycodecontainer forgotcountrycodecontainer"><input type="text" name="dig_countrycodec" class="input-text countrycode forgotcountrycode" value="'+dig_mdet.uccode+'" maxlength="6" size="3" placeholder="'+dig_mdet.uccode+'"/></div>'),setTimeout(function(){user_login.trigger("keyup")})),jQuery(".dig_wc_registercountrycode").bind("keyup change",function(e){var i=jQuery(this),t=jQuery(this).val(),r=t.length,o=i.parent().parent().find("input#reg_email");++r<2&&(r=2),i.attr("size",r),0==t.trim().length&&i.val("+"),o.css({"padding-left":mobilePaddingLeft(i.outerWidth()+ew/2+"px")},"fast",function(){}),updateMailSecondLabel(o)}),user_login.bind("keyup change",function(e){jQuery.isNumeric(jQuery(this).val())?(jQuery(".forgotcountrycodecontainer").css({display:"inline-block"}),jQuery(".forgotcountrycode").trigger("keyup")):(jQuery(".forgotcountrycodecontainer").hide(),jQuery(this).css({"padding-left":"0.75em"}))}),jQuery(".forgotcountrycode").bind("keyup change",function(e){var i=jQuery(this).val().length;++i<2&&(i=2),jQuery(this).attr("size",i),0==jQuery(this).val().trim().length&&jQuery(this).val("+"),user_login.css({"padding-left":mobilePaddingLeft(jQuery(".forgotcountrycode").outerWidth(!0)+ew/2+"px")},"fast",function(){})});var isSecondMailVisible=!1,inftype=0;jQuery(document).on("keyup",".dig_wc_logincountrycode",function(e){var i=jQuery(this),t=i.val(),r=t.length,o=i.parent().parent().find("#username");++r<2&&(r=2),i.attr("size",r),0==t.trim().length&&i.val("+"),o.attr("style","padding-left:"+mobilePaddingLeft(i.outerWidth()+ew/2+"px !important;")),digit_validateLogin(o)});var max=5;jQuery(".login .inline").each(function(){jQuery(this).closest("form").find(".woocommerce-LostPassword").prepend(jQuery(this))});var registerstatus=0,regDone=0;register.find("input").focusout(function(){1!=regDone&&(register.find("input[type='submit']").each(function(){jQuery(this).removeAttr("disabled").removeClass("disabled")}),regDone=0)});var forgotDone=0;jQuery(".woocommerce-ResetPassword input").focusin(function(){1!=forgotDone&&(jQuery(".woocommerce-ResetPassword input[type='submit']").each(function(){jQuery(this).removeAttr("disabled").removeClass("disabled")}),forgotDone=1)});var forgotOutDone=0;jQuery(".woocommerce-ResetPassword input").focusout(function(){1!=forgotOutDone&&(jQuery(".woocommerce-ResetPassword input[type='submit']").each(function(){jQuery(this).removeAttr("disabled").removeClass("disabled")}),forgotOutDone=1)});var loginDone=0,curRegForm;jQuery("form.login input").focusout(function(){1==loginDone&&(jQuery("form.login input[type='submit']").each(function(){jQuery(this).removeAttr("disabled").removeClass("disabled")}),loginDone=0)});var passwcdo=0,lastcountrycode,lastmobileNo,lastDtype;2!=dig_mdet.pass_accept&&0<dig_mdet.mobile_accept&&register.find('input[id="reg_password"]').each(function(){jQuery(this).parent().hide()}),register.find(".woocommerce-Button, button[name='register']").each(function(){"register"==jQuery(this).attr("name")&&(jQuery(this).hasClass("otp_reg_dig_wc")||jQuery(".otp_reg_dig_wc").length&&jQuery(this).val(dig_mdet.RegisterWithPassword).addClass("wc_reg_pass_btn"))}),jQuery("#reg_password").on("change",function(){jQuery(this).closest("form").find("[type='submit']").removeAttr("disabled")}),register.find("input[type='submit'], .woocommerce-Button, button[name='register']").click(function(e){if(1==registerstatus)return!0;curRegForm=jQuery(this).closest("form"),update_time_button=jQuery(this);var i=jQuery.trim(curRegForm.find("#reg_email").val()),t=jQuery.trim(curRegForm.find("#secondmailormobile").val());if(jQuery(this).hasClass("otp_reg_dig_wc")){if(!jQuery.isNumeric(i)&&!jQuery.isNumeric(t))return showDigMessage(dig_mdet.Thisfeaturesonlyworkswithmobilenumber),!1;curRegForm.find(".wc_reg_pass_btn").hide(),curRegForm.find("#_wpnonce").parent().find("input[type='submit']").remove()}else if(0==passwcdo&&!curRegForm.find("#reg_billing_otp").is(":visible")){passwcdo=1;var r=curRegForm.find("#reg_password").parent();if("none"==r.css("display"))return curRegForm.find(".otp_reg_dig_wc").hide(),r.show(),!1}var o=curRegForm.find("#reg_password");if(0<o.length){var d=o.val();if(1==dig_mdet.strong_pass&&(2==dig_mdet.pass_accept||0<d.length)){var n=wp.passwordStrength.meter(d,["black","listed","word"],d);if(null!=n&&n<3)return showDigMessage(dig_mdet.useStrongPasswordString),!1}}if(!validateCustomFields(curRegForm))return showDigMessage(dig_mdet.fillAllDetails),!1;if(0==dig_mdet.mobile_accept&&0==dig_mdet.mail_accept)return!0;if(0<o.length){var s=o.val();if(!jQuery(this).hasClass("otp_reg_dig_wc")&&o.is(":visible")&&0==s.length)return showDigMessage(dig_mdet.invalidpassword),!1;if(0==s.length&&validateEmail(i)&&validateEmail(t)&&!jQuery.isNumeric(i)&&!jQuery.isNumeric(t))return showDigMessage(dig_mdet.eitherentermoborusepass),!1}if(validateEmail(i)&&validateEmail(t)&&0<t.length)return showDigMessage(dig_mdet.InvalidMobileNumber),!1;if(jQuery.isNumeric(i)&&jQuery.isNumeric(t)&&0<t.length)return showDigMessage(dig_mdet.InvalidEmail),!1;var a=curRegForm.find(".dig_reg_mail");if(validateEmail(i)?a.val(i):validateEmail(t)&&a.val(t),2==dig_mdet.mail_accept&&!validateEmail(a.val()))return showDigMessage(dig_mdet.InvalidEmail),!1;if(2==dig_mdet.mobile_accept&&!jQuery.isNumeric(i)&&!jQuery.isNumeric(t))return showDigMessage(dig_mdet.InvalidMobileNumber),!1;var u=jQuery("#reg_billing_otp");return 1==regverify?(jQuery.isNumeric(i)?verifyOtp(curRegForm.find(".dig_wc_registercountrycode").val(),i,nounce.val(),u.val(),2):jQuery.isNumeric(t)&&verifyOtp(curRegForm.find(".dig_wc_registersecondcountrycode").val(),t,nounce.val(),u.val(),2),!1):(curRegForm.find("#reg_username").length&&(username_reg_field=curRegForm.find("#reg_username").val()),curRegForm.find(".dig-custom-field-type-captcha").length&&(captcha_reg_field=curRegForm.find(".dig-custom-field-type-captcha").find("input[type='text']").val(),captcha_ses_reg_field=curRegForm.find(".dig-custom-field-type-captcha").find(".dig_captcha_ses").val()),akCallback="registerWooCallBack",jQuery.isNumeric(i)?(email_reg_field=t,verifyMobileNoLogin(curRegForm.find(".dig_wc_registercountrycode").val(),i,nounce.val(),2),email_reg_field=i,!1):jQuery.isNumeric(t)?(verifyMobileNoLogin(curRegForm.find(".dig_wc_registersecondcountrycode").val(),t,nounce.val(),2),!1):void 0)});var username_reg_field="",email_reg_field="",captcha_reg_field="",captcha_ses_reg_field="",isFirebase=0,isDigFbAdd=0;jQuery(".woocommerce-checkout").find("#dig_billing_otp").on("blur",function(e){if(0!=jQuery(this).val().length&&2!=isDigFbAdd){if(1==isFirebase&&1==isDigFbAdd){loader.show();var i=jQuery("#dig_wc_bill_code").closest("form"),t=i.find("#dig_billing_otp").val();if(null==t||0==t.length)return loader.hide(),void showDigMessage(dig_mdet.InvalidOTP);window.confirmationResult.confirm(t).then(function(e){firebase.auth().currentUser.getIdToken(!0).then(function(e){window.verifyingCode=!1,window.confirmationResult=null,jQuery("#dig_ftok_fbase").remove(),i.append("<input type='hidden' name='dig_ftoken' value='"+e+"' id='dig_ftok_fbase' />"),isDigFbAdd=2,loader.hide()}).catch(function(e){loader.hide(),showDigMessage(e)})}).catch(function(e){loader.hide(),showDigMessage(dig_mdet.InvalidOTP)})}return!0}}),loader.on("click",function(){dismissLoader&&loader.hide()});var regverify=0,logverify=0,forgverify=0,editverify=0,cuForm;dig_login_wp_elem.on("submit",function(){if(1==logverify)return jQuery(".dig_wc_mobileLogin").trigger("click"),!1});var nounce=jQuery(".dig_nounce");jQuery(document).on("click",".dig_wc_mobileLogin",function(){update_time_button=jQuery(this);var e=(cuForm=jQuery(this).closest("form")).find(".countrycode").val();if(0<cuForm.find("#username").length)var i=cuForm.find("#username").val();else i=cuForm.find("#user_login").val();if(""!=i&&""!=e){jQuery("#dig_wc_log_otp");if(1==dig_mdet.captcha_accept&&null!=(captcha_reg_field=cuForm.find("input[name='digits_reg_logincaptcha']").val())&&(captcha_ses_reg_field=cuForm.find(".dig-custom-field-type-captcha").find(".dig_captcha_ses").val(),0==captcha_reg_field.length))return showDigMessage("Please enter a valid captcha!"),!1;if(jQuery.isNumeric(e)&&jQuery.isNumeric(i))return 1==logverify?verifyOtp(e,i,nounce.val(),jQuery("#dig_wc_log_otp").val(),1):jQuery.isNumeric(i)&&(akCallback="loginCallback",verifyMobileNoLogin(e,i,nounce.val(),1)),!1;var t=cuForm.find("input[type='password']").val();if(null!=t){if(0!=t.length)return!0;showDigMessage(dig_mdet.InvalidMobileNumber)}return!1}showDigMessage(dig_mdet.InvalidMobileNumber)});var updateProfileStatus=0,forgotPassChange=0,prv_forg_wc=-1,lastotpcountrycode,lastotpmobileNo,lastotpDtype;jQuery("form.lost_reset_password input[type='submit'],form.lost_reset_password button[type='submit']").click(function(){if(update_time_button=jQuery(this),-1==prv_forg_wc&&(prv_forg_wc=jQuery(this).is(":input")?jQuery(this).val():jQuery(this).text()),1==forgotPassChange)return jQuery("#dig_wc_password").val()==jQuery("#dig_wc_cpassword").val()||(showDigMessage(dig_mdet.Passwordsdonotmatch),!1);var e=user_login.val(),i=jQuery("form.lost_reset_password .forgotcountrycode").val(),t=jQuery("#digit_forgot_otp");return 1==forgverify?(verifyOtp(i,e,nounce.val(),t.val(),3),!1):jQuery.isNumeric(e)?(jQuery("form.lost_reset_password").attr("action",window.location.pathname+"?login=true"),akCallback="forgotPasswordCallBack",verifyMobileNoLogin(i,e,nounce.val(),3),!1):(jQuery("form.lost_reset_password").removeAttr("action"),!0)});var updateAccountStatus=0;jQuery("form.woocommerce-EditAccountForm input[type='submit'],form.woocommerce-EditAccountForm button[type='submit']").click(function(){if(update_time_button=jQuery(this),1==updateAccountStatus)return!0;var e=jQuery(this).closest("form"),i=e.find("#dig_wc_cur_phone").val(),t=e.find(".dig_wc_nw_phone").val(),r=e.find(".dig_wc_logincountrycode").val();if(0==t.length)return!0;if(i==t)return!0;if(jQuery.isNumeric(t)){var o=jQuery("#digit_ac_otp");if(1==editverify)return verifyOtp(r,t,nounce.val(),o.val(),11),!1;akCallback="updateAccountCallback",verifyMobileNoLogin(r,t,nounce.val(),11)}else showDigMessage(dig_mdet.InvalidMobileNumber);return!1});var wpuseredit=0;jQuery("form#your-profile input[type='submit']").click(function(){if(wpuseredit=1,update_time_button=jQuery(this),1==updateProfileStatus)return!0;if(1==dig_mdet.verify_mobile){var e=jQuery("form#your-profile #username").val(),i=jQuery("form#your-profile .dig_wc_logincountrycode").val(),t=i+e,r=jQuery("form#your-profile #dig_cur_phone").val();if(0==e.length)return!0;if(r==t)return!0;var o=jQuery("#profile_update_otp");if(jQuery.isNumeric(e)){if(1==editverify)return verifyOtp(i,e,nounce.val(),o.val(),11),!1;akCallback="updateProfileCallback",verifyMobileNoLogin(i,e,nounce.val(),11)}else showDigMessage(dig_mdet.InvalidMobileNumber);return!1}}),jQuery(document).on("click","#dig_man_resend_otp_btn",function(){var i=jQuery(this);jQuery(this).hasClass("dig_resendotp_disabled")||(loader.show(),jQuery.ajax({type:"post",url:dig_mdet.ajax_url,data:{action:"digits_resendotp",countrycode:i.attr("countrycode"),mobileNo:i.attr("mob"),csrf:i.attr("csrf"),login:i.attr("dtype")},success:function(e){e=e.trim(),loader.hide(),0==e?showDigMessage(dig_mdet.Pleasetryagain):-99==e?showDigMessage(dig_mdet.invalidcountrycode):updateTime(i)}}))});var resendTime=dig_mdet.resendOtpTime,update_time_button,verfiybilling=0,billing_page=0,unbpchk;if(jQuery("#dig_wc_check_page").length&&1==dig_mdet.mob_verify_checkout&&0<dig_mdet.mobile_accept){var regForm;jQuery("#dig_billing_otp").closest("p").hide();var undigbill=jQuery(".woocommerce-checkout"),createAccount=undigbill.find(".create-account").last(),digchbtn;if(dig_billing_password.length&&1==dig_mdet.pass_accept)digchbtn="<input type='submit' class='dig_billing_pass_signup' id='dig_billing_pass_btn' onclick='verifyOTPbilling(2);return false;' value='"+dig_mdet.signupwithpassword+"'/><div class='digor' id='digorbilling'>"+dig_mdet.or+"</div><input type='submit' class='dig_billing_otp_signup' onclick='verifyOTPbilling(1);return false;' value='"+dig_mdet.signupwithotp+"'/>";else{var lb=dig_mdet.signupwithotp,clss="dig_billing_otp_signup";0!=dig_mdet.mobile_accept&&2!=dig_mdet.pass_accept&&0!=dig_mdet.pass_accept||(lb=dig_mdet.signup,clss="dig_billing_signup"),undigbill.attr("data-show-btn","dig_billing_otp_signup"),digchbtn="<input type='submit' class='dig_billing_otp_signup' onclick='verifyOTPbilling(1);return false;' value='"+lb+"'/>"}createAccount.append("<div class='dig_billing_wc_dv'>"+digchbtn+'</div><div  class="dig_resendotp dig_wcbil_bill_resend" id="dig_man_resend_otp_btn" dis="1">'+dig_mdet.resendOTP+" <span>(00:<span>30</span>)</span></div><a id='dig_billing_validate_button' style='display:none;'></a><a id='dig_billing_signupwithpassword' style='display:none;'></a><br /> ");var tasc=0;dig_billing_password.length&&2!=dig_mdet.pass_accept&&(jQuery("#dig_billing_password_field").hide(),jQuery("#dig_billing_signupwithpassword").click(function(){jQuery("#digorbilling").hide(),jQuery("#dig_billing_pass_btn").hide(),jQuery("#dig_billing_password_field").show()})),jQuery("#dig_billing_validate_button").click(function(){update_time_button=jQuery(this),billing_page=1;var e=createAccount.closest("form");unbpchk=e.find("#username");var t=!1;if(e.find("input").each(function(){var e=jQuery(this),i=e.val();if(e.is(":visible")&&0==i.length&&jQuery(this).closest(".form-row").hasClass("validate-required"))return t=!0}),!validateCustomFields(createAccount)||t)return showDigMessage(dig_mdet.fillAllDetails),!1;if(jQuery(".dig_opt_mult_con_tac").find(".dig_input_error").length)return showDigMessage(dig_mdet.accepttac),!1;if(0==dig_log_obj.mobile_accept&&0==dig_log_obj.mail_accept)return!0;var i=unbpchk.val(),r=e.find(".dig_wc_logincountrycode").val();if(!jQuery.isNumeric(i)&&2!=dig_mdet.mobile_accept)return showDigMessage(dig_mdet.InvalidMobileNumber),!1;if(!jQuery.isNumeric(i))return showDigMessage(dig_mdet.InvalidMobileNumber),!1;jQuery("#dig_billing_otp");akCallback="updateCheckoutDetails",verifyMobileNoLogin(r,i,nounce.val(),2)})}var ihcloginform=jQuery("#ihc_login_form"),acur=window.location.href;if(acur=acur.substring(0,acur.indexOf("?")),ihcloginform.length&&0<dig_mdet.login_mobile_accept){var usernameihc=ihcloginform.find("#iump_login_username"),passwordihc=ihcloginform.find("#iump_login_password");usernameihc.attr("placeholder",dig_mdet.UsernameMobileno),ihcloginform.attr("action",acur+"?login=true");var ccd=dig_mdet.uccode;ihcloginform.find("input[type='hidden']").val(dig_mdet.nonce).attr("name","dig_nounce"),ihcloginform.append("<input type='hidden' value='true' name='isimpc' />"),usernameihc.wrap('<div class="digcon"></div>').before('<div class="dig_ihc_countrycodecontainer dig_ihc_logincountrycodecontainer" style="display: none;"><input type="text" name="countrycode" class="input-text countrycode dig_ihc_logincountrycode" value="'+ccd+'" maxlength="6" size="3" placeholder="'+ccd+'" style="position: absolute;top:0;"/></div>'),usernameihc.attr("name","mobmail"),passwordihc.attr("name","password"),usernameihc.bind("keyup change",function(e){jQuery.isNumeric(jQuery(this).val())?(jQuery(".dig_ihc_logincountrycodecontainer").css({display:"inline-block"}),jQuery(this).attr("style","padding-left:"+mobilePaddingLeft(jQuery(".dig_ihc_logincountrycode").outerWidth(!0)+10+"px !important"))):(jQuery(".dig_ihc_logincountrycodecontainer").hide(),jQuery(this).removeAttr("style"))}),jQuery('<div class="impu-form-line-fr impu-dig-otp" id="impu-dig-otp" style="display: none;"><input value="" id="digits_otp_ihc" name="digit_otp" placeholder="'+dig_mdet.OTP+'" type="text" style="padding-left:10px !important;">').insertBefore("#ihc_login_form .impu-form-submit"),jQuery(".dig_ihc_logincountrycode").bind("keyup change",function(e){var i=jQuery(this).val().length;++i<2&&(i=2),jQuery(this).attr("size",i),0==jQuery(this).val().trim().length&&jQuery(this).val("+"),usernameihc.attr("style","padding-left:"+mobilePaddingLeft(jQuery(".dig_ihc_logincountrycode").outerWidth(!0)+10+"px !important"))}),jQuery("#ihc_login_form").unbind("submit");var remotp=0;jQuery(document).on("click","#impu_log_submit",function(){return update_time_button=jQuery(this),1==verifyimpuotp?verifyOtp(jQuery(".dig_ihc_logincountrycode").val(),usernameihc.val(),dig_mdet.nonce,jQuery("#digits_otp_ihc").val(),1):(jQuery.isNumeric(usernameihc.val())&&(ihc_loginform=1,ihc_loginform=10,akCallback="loginCallback",verifyMobileNoLogin(jQuery(".dig_ihc_logincountrycode").val(),usernameihc.val(),dig_mdet.nonce,1)),0==remotp&&(remotp=1,ihcloginform.find("#digorimp").hide(),ihcloginform.find(".impu-form-submit").find("input:first").remove(),ihcloginform.find("div").each(function(e){1<e&&(jQuery(this).hasClass("impu-form-submit")||jQuery(this).hasClass("dig_ihc_logincountrycodecontainer")||jQuery(this).hasClass("impu-dig-otp")||jQuery(this).hide())}))),!1}),0<dig_mdet.login_otp_accept&&ihcloginform.find(".impu-form-submit").append("<div id='digorimp'> "+dig_mdet.or+"<br /><br /></div><input type='submit' id='impu_log_submit' value='"+dig_mdet.loginwithotp+"' /><div class='dig_resendotp dig_impu_login_resend' id='dig_man_resend_otp_btn' dis='1'>"+dig_mdet.resendOTP+" <span>(00:<span>30</span>)</span></div></div>")}var verifyimpuotp=0,ihc_loginform=0,ihcforgotpasswrap=jQuery(".ihc-pass-form-wrap"),ihforgaction=ihcforgotpasswrap.find("input[type='hidden']"),forgotpassMobVerifiedihc=0,forgotpassihc=0;if("reset_pass"==ihforgaction.val()&&0<dig_mdet.forgot_pass){var ihcforgpassform=ihcforgotpasswrap.find("form"),ihcforgsub=ihcforgpassform.find("input[type='submit']");jQuery("<div class='dig_resendotp dig_impu_forg_resend' id='dig_man_resend_otp_btn' dis='1'>"+dig_mdet.resendOTP+" <span>(00:<span>30</span>)</span></div>").insertAfter(ihcforgsub),ihcforgpassform.append("<input type='hidden' name='dig_nounce' value='"+dig_mdet.nonce+"' /><input type='hidden' name='ihc' value='true' />");var ihcForgotUsername=ihcforgotpasswrap.find("input[type='text']");ihcforgpassform.on("submit",function(e){if(update_time_button=jQuery(this),2==forgotpassihc)return jQuery("#digits_password_ihc").val()!=jQuery("#digits_cpassword_ihc").val()?(showDigMessage(dig_mdet.Passwordsdonotmatch),!1):void ihcforgpassform.unbind("submit").submit();if(forgotpassihc=1,jQuery.isNumeric(ihcForgotUsername.val())){ihcforgpassform.attr("action",acur+"?login=true"),ihcForgotUsername.attr("name","forgotmail");var i=jQuery(".dig_ihc_forgotcountrycode").val();return akCallback="forgotihcCallback",0==forgotpassMobVerifiedihc?verifyMobileNoLogin(i,ihcForgotUsername.val(),dig_mdet.nonce,3):(forgotpassihc=1,verifyOtp(i,ihcForgotUsername.val(),dig_mdet.nonce,jQuery("#digits_otp_forg_ihc").val(),3)),!1}return ihcForgotUsername.attr("name","email_or_userlogin"),ihcforgpassform.removeAttr("action"),!0});var ccd=dig_mdet.uccode;ihcForgotUsername.wrap('<div class="digcon"></div>').before('<div class="dig_ihc_forgot_countrycodecontainer dig_ihc_forgot_logincountrycodecontainer" style="display: none;"><input type="text" name="countrycode" class="input-text countrycode dig_ihc_forgotcountrycode" value="'+ccd+'" maxlength="6" size="3" placeholder="'+ccd+'" style="position: absolute;top:0;"/></div>'),ihcForgotUsername.attr("placeholder",dig_mdet.UsernameMobileno),jQuery('<div class="impu-form-line-fr" id="digits_password_ihc_cont" style="display: none;"><input value="" id="digits_password_ihc" name="digits_password" placeholder="'+dig_mdet.Password+'" type="password" style="padding-left:10px !important;"></div><div class="impu-form-line-fr" id="digits_cpassword_ihc_cont" style="display: none;"><input value="" id="digits_cpassword_ihc" name="digits_cpassword" placeholder="'+dig_mdet.ConfirmPassword+'" type="password" style="padding-left:10px !important;"></div>').insertAfter(ihcForgotUsername.closest(".impu-form-line-fr")),jQuery('<div class="impu-form-line-fr impu-dig-otp" id="impu-dig-otp" style="display: none;"><input value="" id="digits_otp_forg_ihc" name="dig_otp" placeholder="'+dig_mdet.OTP+'" type="text" style="padding-left:10px !important;"></div>').insertAfter(ihcForgotUsername.closest(".impu-form-line-fr")),jQuery('<input type="hidden" name="code" id="digits_impu_code"/><input type="hidden" name="csrf" id="digits_impu_csrf"/>').insertAfter(ihcForgotUsername.closest(".impu-form-line-fr")),ihcForgotUsername.bind("keyup change",function(e){jQuery.isNumeric(jQuery(this).val())?(jQuery(".dig_ihc_forgot_countrycodecontainer").css({display:"inline-block"}),jQuery(this).attr("style","padding-left:"+mobilePaddingLeft(jQuery(".dig_ihc_forgotcountrycode").outerWidth(!0)+10+"px !important"))):(jQuery(".dig_ihc_forgot_countrycodecontainer").hide(),jQuery(this).removeAttr("style"))}),jQuery(".dig_ihc_forgotcountrycode").bind("keyup change",function(e){var i=jQuery(this).val().length;++i<2&&(i=2),jQuery(this).attr("size",i),0==jQuery(this).val().trim().length&&jQuery(this).val("+"),ihcForgotUsername.attr("style","padding-left:"+mobilePaddingLeft(jQuery(".dig_ihc_forgotcountrycode").outerWidth(!0)+10+"px !important"))})}jQuery(document).on("click",".dig_popmessage",function(){jQuery(this).closest(".dig_popmessage").slideUp("fast",function(){jQuery(this).remove()})}),jQuery(".dig_bp_enb").length&&jQuery(".dig_bp_enb").each(function(e){jQuery(this).remove()});var dig_bp_btn=0,verfiyBPReg=0;jQuery(document).on("click","#signup_submit_pass_bp",function(){if(1==verfiyBPReg)return!0;verfiyBPReg=1;var e=jQuery("#buddypress").find("form");return e.find("#dig_reg_bp_pass").show().find("input").attr("required","required"),e.find("#signup_submit_otp_bp").hide(),!1}),jQuery("#buddypress #signup_form").on("submit",function(){if(update_time_button=jQuery(this).find('input[name="signup_submit"]'),2==dig_bp_btn)return!0;dig_bp_btn=1;var e=jQuery("#buddypress").find("form"),i=(tokenCon=e).find("#username").val(),t=e.find(".dig_wc_logincountrycode").val(),r=jQuery("#dig_bp_reg_otp"),o=e.find("#signup_password").val();if(1==dig_mdet.strong_pass&&(2==dig_mdet.pass_accept||0<o.length)){var d=wp.passwordStrength.meter(o,["black","listed","word"],o);if(null!=d&&d<3)return showDigMessage(dig_mdet.useStrongPasswordString),!1}if(1==verifybpotp)verifyOtp(t,i,nounce.val(),r.find("input").val(),2);else if(0==i.length)showDigMessage(dig_mdet.pleaseentermobormail);else if(0!=o.length||jQuery.isNumeric(i))if(jQuery.isNumeric(i))e.find("#signup_submit_otp_bp").is(":visible")&&e.find("#signup_submit_pass_bp").remove(),akCallback="updateRegisterDetails",verifyMobileNoLogin(t,i,nounce.val(),2);else{if(validateEmail(i))return!0;showDigMessage(dig_mdet.Invaliddetails)}else showDigMessage(dig_mdet.eitherentermoborusepass);return!1});var verifybpotp=0,bpuseredit=0,bpeditverify=0;if(jQuery("#buddypress").find("form#settings-form").on("submit",function(){update_time_button=jQuery(this);var e=jQuery(this),i=(tokenCon=e).find("#username").val(),t=e.find("#dig_wc_logincountrycode").val();if(jQuery("#dig_superadmin").length)return!0;if(!jQuery.isNumeric(i))return!0;if(i==e.find("#dig_bp_current_mob"))return!0;if(1==bpeditverify){var r=jQuery("#bp_otp_dig_ea");verifyOtp(t,i,nounce.val(),r.find("input").val(),11)}else bpuseredit=1,akCallback="updateBPAccountDetails",verifyMobileNoLogin(t,i,nounce.val(),11);return!1}),0!==dig_mdet.login_mobile_accept){var bb_wp_lform=jQuery(".wp_login");bb_wp_lform.length||(bb_wp_lform=jQuery(".wp-core-ui #loginform"),bb_wp_lform.addClass("wp_login")),bb_wp_lform.length&&0<dig_mdet.login_otp_accept&&bb_wp_lform.find("input[type='submit']").parent().append("<div class='dig_otp_block'><div class='digor'> "+dig_mdet.or+"<br /><br /></div><input type='submit' class='dig_wc_mobileLogin button button-primary button-large' id='wp_bb_log_submit' value='"+dig_mdet.loginwithotp+"' /><div class='dig_resendotp dig_wc_login_resend dig_bb_login_resend' id='dig_man_resend_otp_btn' dis='1'>"+dig_mdet.resendOTP+" <span>(00:<span>30</span>)</span></div></div></div>")}jQuery(".wp_reg").on("submit",function(){if(1==registerstatus)return!0;update_time_button=jQuery(this).find("input[type='submit']"),curRegForm=jQuery(this);var e=formatMobileNumber((tokenCon=curRegForm).find("#username").val()),i=curRegForm.find(".dig_wc_logincountrycode").val();if(!validateCustomFields(curRegForm))return!1;if(0==dig_mdet.mobile_accept)return!0;if(!jQuery.isNumeric(e)||!jQuery.isNumeric(i)||0==i.length||0==e.length)return 0==e.length&&1==dig_mdet.mobile_accept||(showDigMessage(dig_mdet.InvalidMobileNumber),!1);var t=jQuery("#reg_billing_otp");return 1==regverify?verifyOtp(i,e,nounce.val(),t.val(),2):(curRegForm.find("#user_uname").length&&(username_reg_field=curRegForm.find("#user_uname").val()),curRegForm.find(".dig-custom-field-type-captcha").length&&(captcha_reg_field=curRegForm.find(".dig-custom-field-type-captcha").find("input[type='text']").val(),captcha_ses_reg_field=curRegForm.find(".dig-custom-field-type-captcha").find(".dig_captcha_ses").val()),email_reg_field=curRegForm.find("#user_email").val(),akCallback="registerWooCallBack",verifyMobileNoLogin(i,e,nounce.val(),2)),!1});var submiticform=0,ihcedform=0;if(c.length){var e=jQuery("#dig_ihc_mobcon");jQuery(".iump-register-form").find("#edituser").length&&0<dig_mdet.mobile_accept&&(jQuery(c).prepend(e),jQuery(e.find("#dig_ihc_mobotp")).insertBefore(c.find("input[type='submit']").parent())),jQuery(".ihc-form-create-edit input[type=submit]").click(function(){update_time_button=jQuery(this);var e=jQuery(".ihc-form-create-edit");if(1==submiticform||!e.find("#username").length)return!0;var i=e.find("#username").val(),t=e.find(".dig_wc_logincountrycode").val();if(i==e.find("#dig_ihc_current_mob").val())return!0;if(jQuery.isNumeric(i))if(2==ihcedform){var r=e.find("#dig_ihc_mobotp");verifyOtp(t,i,nounce.val(),r.find("input").val(),11)}else akCallback="updateIHCAccountDetails",ihcedform=1,verifyMobileNoLogin(t,i,nounce.val(),11);else{if(!(0<i.length))return!0;showDigMessage(dig_mdet.InvalidMobileNumber)}return!1})}var submitumform=0,subitumotp=0;if(um_register.find("form").on("submit",function(){if(update_time_button=jQuery(this).find("#um-submit-btn"),1==submitumform)return!0;var e=jQuery(this),i=e.find("#username").val(),t=e.find(".dig_wc_logincountrycode").val(),r=e.find(".dig_otp_um_reg");return 0==i.length||(0<e.find("#um_sub").length||(jQuery.isNumeric(i)?(loader.show(),i=formatMobileNumber(i),akCallback="submitUMRegform",2==subitumotp?verifyOtp(t,i,nounce.val(),r.find("input").val(),2):(subitumotp=1,verifyMobileNoLogin(t,i,nounce.val(),2)),jQuery(".um-register").find("input[type='submit']").removeAttr("disabled")):showDigMessage(dig_mdet.InvalidMobileNumber),!1))}),jQuery(".dig_um_loginviaotp").on("click",function(){update_time_button=jQuery(this);var e=um_login.find("#username").val(),i=jQuery(".dig_nounce").val(),t=um_login.find(".dig_wc_logincountrycode").val();if(""==e||""==t)return showDigMessage(dig_mdet.InvalidMobileNumber),!1;var r=jQuery(".dig_otp_um_login");return jQuery.isNumeric(e)&&jQuery.isNumeric(e)?2==subitumotp?verifyOtp(t,e,i,r.find("input").val(),1):jQuery.isNumeric(e)?(akCallback="loginCallback",verifyMobileNoLogin(t,e,i,subitumotp=1)):0<e.length?showDigMessage(dig_log_obj.Thisfeaturesonlyworkswithmobilenumber):(akCallback="loginCallback",verifyMobileNoLogin(t,e,i)):showDigMessage(dig_mdet.InvalidMobileNumber),!1}),0<jQuery("#dig_reg_mail").length&&""!=jQuery("#reg_email").attr("placeholder")&&null!=jQuery("#reg_email").attr("placeholder")){var fn_pld=jQuery("#reg_billing_first_name");fn_pld.attr("placeholder",jQuery.trim(fn_pld.parent().find("label").text())),register.find(".dig-custom-field").each(function(){var e=jQuery.trim(jQuery(this).find("label").text());e&&jQuery(this).find("input").attr("placeholder",e)})}}function loginuser(e){if(precode==e.code)return!1;var i=0;return jQuery("#rememberme").length&&(i=0<jQuery("#rememberme:checked").length),precode=e.code,jQuery.ajax({type:"post",url:dig_mdet.ajax_url,data:{action:"digits_login_user",code:e.code,csrf:e.state,rememberMe:i},success:function(e){if(isJSON(e))if(e.code){if(e.redirect)return void(window.location.href=e.redirect);e=e.code}else e=e;else e=e.trim();loader.hide(),"1"==e?10==ihc_loginform?document.location.href="/":jQuery("#digits_redirect_page").length?window.location.href=jQuery("#digits_redirect_page").val():window.location.href=dig_mdet.uri:showDigMessage(-1==e?dig_mdet.pleasesignupbeforelogginin:-9==e?dig_mdet.invalidapicredentials:dig_mdet.invalidlogindetails)}}),!1}function forgotihcCallback(e){showDigitsLoader(!0),"PARTIALLY_AUTHENTICATED"===e.status&&(jQuery("#digits_impu_code").val(e.code),jQuery("#digits_impu_csrf").val(e.csrf),jQuery("#digits_password_ihc_cont").show().find("input").attr("required","required"),jQuery("#digits_cpassword_ihc_cont").show().find("input").attr("required","required"),forgotpassihc=2)}function loginCallback(e){"PARTIALLY_AUTHENTICATED"===e.status?(showDigitsLoader(!1),loginuser(e)):"NOT_AUTHENTICATED"===e.status?showDigitsLoader(!0):"BAD_PARAMS"===e.status&&showDigitsLoader(!0)}function smsLogin(){}function phonenumber(e){return!!e.match(/^\+?([0-9]{2})\)?[-. ]?([0-9]{4})[-. ]?([0-9]{4})$/)}function update_username_field(e){if(0==dig_mdet.login_mobile_accept){var i=e.attr("f-mob");if(!i||0==i)return}if(0==dig_mdet.mobile_accept&&1==(o=e.attr("reg")))return;var t,s=e,r=s.attr("data-dig-main");if(!r)if(1==e.attr("data-dig-mob"))t=e.attr("countryCode")?e.attr("countryCode"):dig_mdet.uccode;else if(1!=e.attr("mob")){var o,d=dig_mdet.emailormobile;(o=e.attr("reg"))&&0!=o?1==o&&(0<dig_mdet.mobile_accept&&0<dig_mdet.mail_accept?d=dig_mdet.emailormobile:0<dig_mdet.mobile_accept?d=dig_mdet.MobileNumber:0<dig_mdet.mail_accept&&(d=dig_mdet.email)):(o=0)<dig_mdet.login_mobile_accept&&0<dig_mdet.login_mail_accept?d=dig_mdet.emailormobile:0<dig_mdet.login_mobile_accept?d=dig_mdet.MobileNumber:0<dig_mdet.login_mail_accept&&(d=dig_mdet.email),2!=o&&(s.prev().html(d+" <span class=required>*</span>"),s.attr("placeholder")&&s.attr("placeholder",d)),t=dig_mdet.uccode}else s.prev().html(dig_mdet.MobileNumber+" <span class=required>*</span>"),s.attr("placeholder")&&s.attr("placeholder",dig_mdet.MobileNumber),t=e.attr("countryCode")?e.attr("countryCode"):dig_mdet.uccode;var n="",a="",u="digt_countrycode";if(e.attr("data-skip-label"))t=dig_mdet.uccode;else if(r){var c=e.attr("countryCode");t=void 0!==c?-1==c?"+":"+"+c:dig_mdet.uccode,n="dig_update_hidden ",a='data-dig-main="'+s.attr("data-dig-main")+'"',u=s.attr("data-dig-main")+"_digt_countrycode"}s.wrap('<div class="digcon"></div>').before('<div class="dig_wc_countrycodecontainer dig_wc_logincountrycodecontainer"><input type="text" name="'+u+'" class="'+n+'input-text countrycode dig_wc_logincountrycode" value="'+t+'" maxlength="6" size="3" placeholder="'+t+'" '+a+"/></div>"),s.attr("nan")||s.attr("name","mobile/email"),s.bind("keyup change",function(e){var i=s.parent().find(".dig_wc_countrycodecontainer"),t=i.find("input"),r=s.attr("data-dig-main");if(r){var o=jQuery(this).closest(".digcon").find(".dig_update_hidden"),d=jQuery(this).val(),n=o.val();jQuery.isNumeric(d)&&0<d.length&&jQuery.isNumeric(n)&&0<n.length?jQuery("#"+r).val(n+""+d):jQuery("#"+r).val("")}jQuery.isNumeric(jQuery(this).val())||jQuery(this).attr("only-mob")?(i.css({display:"inline-block"}),t.trigger("keyup"),s.attr("data-show-btn")&&jQuery("."+s.attr("data-show-btn")).show()):(i.hide(),jQuery(this).attr("removeStyle")?jQuery(this).removeAttr("style"):jQuery(this).css({"padding-left":"0.75em"}),s.attr("data-show-btn")&&2!=dig_mdet.mobile_accept&&jQuery("."+s.attr("data-show-btn")).hide()),digit_validateLogin(s)}),setTimeout(function(){s.trigger("keyup")})}function digit_validateLogin(e){var i=e.closest("form");if(jQuery.isNumeric(e.val())){var t=e.parent().find(".dig_wc_countrycodecontainer").find("input");i.find("#loginuname").val(t.val()+e.val())}else i.find("#loginuname").val(e.val())}function updateMailSecondLabel(e){var i=e.val(),t=e.closest("form"),r=t.find(".dig_wc_registersecondcountrycodecontainer"),o=(e.parent(),t.find(".secondmailormobile")),d=t.find("#dig_secHolder");if(jQuery.isNumeric(i)&&1!=inftype||2==dig_mdet.mail_accept?(inftype=1,d.html(dig_mdet.email),r.hide(),o.css({"padding-left":"0.75em"})):jQuery.isNumeric(i)||2==inftype||2==dig_mdet.mobile_accept||(inftype=2,d.html(dig_mdet.MobileNumber),r.css({display:"inline-block"}),o.css({"padding-left":mobilePaddingLeft(r.find(".dig_wc_registersecondcountrycode").outerWidth()+ew/2+"px")})),2!=dig_mdet.mail_accept&&2!=dig_mdet.mobile_accept){if(""==i||0==i.length)return t.find(".dig_wc_mailsecond").stop().slideUp(),void(isSecondMailVisible=!1);if(isSecondMailVisible)return;t.find(".dig_wc_mailsecond").stop().slideDown().show(),isSecondMailVisible=!0}}function registerWooCallBack(e){if(showDigitsLoader(!0),"PARTIALLY_AUTHENTICATED"===e.status){registerstatus=1;var i=e.code,t=e.state;curRegForm.find(".register_code").val(i),curRegForm.find(".register_csrf").val(t),curRegForm.find('[type="submit"]').click()}}function validateEmail(e){return 0<=e.search("@")&&0<=e.search(/\./)&&e.search("@")<e.split("@")[1].search(/\./)+e.search("@")}function verifyMobileNoLogin(o,d,n,s){lastcountrycode!=o||lastmobileNo!=d||lastDtype!=s?(dismissLoader=!1,loader.show(),hideDigMessage(),lastcountrycode=o,lastmobileNo=d,lastDtype=s,jQuery.ajax({type:"post",url:dig_mdet.ajax_url,data:{action:"digits_check_mob",countrycode:o,mobileNo:d,csrf:dig_mdet.nonce,login:s,username:username_reg_field,email:email_reg_field,captcha:captcha_reg_field,captcha_ses:captcha_ses_reg_field,json:1},success:function(i){captcha_ses_reg_field=captcha_reg_field=email_reg_field=username_reg_field="",lastmobileNo=lastDtype=0,loader.hide();var e=-1;if(isJSON(i)){if(!1===i.success)return void showDigMessage(i.data.message);e=i.ak,isFirebase=i.firebase,i=i.code}else i=i.trim();if(-99!=i){if(-11==i){if(1==s)return void showDigMessage(dig_mdet.pleasesignupbeforelogginin);if(3==s)return void showDigMessage(dig_mdet.Mobilenumbernotfound)}else if(0==i)return void showDigMessage(dig_mdet.error);if(-1==i&&2==s||-1==i&&11==s)showDigMessage(dig_mdet.MobileNumberalreadyinuse);else if(d=d.replace(/^0+/,""),o=o.replace(/^0+/,""),1==e)processAccountkitLogin(o,d);else if(1==isFirebase){dismissLoader=!0,loader.show();var t=o+d,r=window.recaptchaVerifier;firebase.auth().signInWithPhoneNumber(t,r).then(function(e){isDigFbAdd=1,loader.hide(),window.confirmationResult=e,verifyMobNo_success(i,o,d,n,s)}).catch(function(e){loader.hide(),showDigMessage(e.message)})}else verifyMobNo_success(i,o,d,n,s)}else showDigMessage(dig_mdet.invalidcountrycode)}})):loader.hide()}function processAccountkitLogin(countrycode,phoneNumber){hideDigitsLoader(),AccountKit.login("PHONE",{countryCode:countrycode,phoneNumber:phoneNumber},eval(akCallback))}function verifyMobNo_success(e,i,t,r,o){if(dismissLoader=!1,1==o){if(1==e)if(1==ihc_loginform)ihc_loginform=0,updateTime(jQuery(".dig_impu_login_resend").attr({countrycode:i,mob:t,csrf:r,dtype:o})),(d=jQuery("#impu-dig-otp")).show().find("input").attr("required","required").focus(),verifyimpuotp=1;else if(1==subitumotp)um_login.find(".digor").hide().remove(),um_login.find(".um-row").slideUp(),um_login.find(".um-col-alt").slideUp().remove(),um_login.find(".um-col-alt-b").hide().remove(),jQuery(".dig_otp_um_login").fadeIn().find("input").attr("required","required").focus(),subitumotp=2,tokenCon=um_login.find("form"),updateTime(jQuery(".dig_um_login_resend").attr({countrycode:i,mob:t,csrf:r,dtype:o}));else{updateTime(jQuery(".dig_wc_login_resend").attr({countrycode:i,mob:t,csrf:r,dtype:o})),hideloginpageitems(),logverify=1,(d=cuForm.find("#dig_wc_log_otp_container")).slideDown().find("input").attr("required","required").focus(),jQuery("#username").closest("p").hide()}}else if(2==o){if(1==billing_page)updateTime(jQuery(".dig_wcbil_bill_resend").attr({countrycode:i,mob:t,csrf:r,dtype:o})),verfiybilling=1,jQuery("#digorbilling").hide(),jQuery(".dig_billing_otp_signup").hide(),(d=jQuery("#dig_billing_otp")).attr("required","required").closest("p").slideDown(),d.focus();else if(1==dig_bp_btn){updateTime(jQuery(".dig_wcbil_bill_resend").attr({countrycode:i,mob:t,csrf:r,dtype:o})),(d=jQuery("#dig_bp_reg_otp")).show().find("input").attr("required","required").focus(),verifybpotp=1,dig_bp_btn=0}else if(1==subitumotp){var d=jQuery(".dig_otp_um_reg");tokenCon=um_register.closest("form"),d.slideDown().find("input").attr("required","required").focus(),subitumotp=2,updateTime(jQuery(".dig_um_regis_resend").attr({countrycode:i,mob:t,csrf:r,dtype:o}))}else{updateTime(jQuery(".dig_wc_register_resend").attr({countrycode:i,mob:t,csrf:r,dtype:o})),curRegForm.find(".form-row").find("input[type='password']").each(function(){jQuery(this).closest(".form-row").slideUp()}),(d=curRegForm.find("#reg_billing_otp_container")).slideDown().find("input").attr("required","required").focus(),regverify=1}}else if(3==o){if(1==forgotpassihc)updateTime(jQuery(".dig_impu_forg_resend").attr({countrycode:i,mob:t,csrf:r,dtype:o})),(d=jQuery("#impu-dig-otp")).show().find("input").attr("required","required").focus(),forgotpassMobVerifiedihc=1,forgotpassihc=0;else updateTime(jQuery(".dig_wc_forgot_resend").attr({countrycode:i,mob:t,csrf:r,dtype:o})),forgverify=1,user_login.attr("name","forgotmail"),(d=jQuery("#digit_forgot_otp_container")).show().find("input").attr("required","required").focus()}else if(11==o)if(1==wpuseredit){jQuery("form#your-profile .form-table").find("input [type='password']").each(function(){jQuery(this).closest(".form-table").hide()});d=jQuery("#profile_update_otp_container");tokenCon=d.closest("form"),d.slideDown().find("input").attr("required","required").focus(),editverify=1}else if(1==bpuseredit){(d=jQuery("#bp_otp_dig_ea")).slideDown().find("input").attr("required","required").focus(),jQuery("#dig_bp_ac_ea_resend").show(),updateTime(jQuery(".dig_bp_ac_ea_resend").attr({countrycode:i,mob:t,csrf:r,dtype:o})),bpeditverify=1}else if(1==ihcedform){d=jQuery("#dig_ihc_mobotp");tokenCon=d.closest("form"),d.slideDown().find("input").attr("required","required").focus(),ihcedform=2}else{updateTime(jQuery(".dig_wc_acc_edit_resend").attr({countrycode:i,mob:t,csrf:r,dtype:o})),(d=jQuery("#digit_ac_otp_container")).slideDown().find("input").attr("required","required").focus(),editverify=1}}function hideloginpageitems(){var e=jQuery(".wp_login");if(cuForm.hasClass("wp_login"))return cuForm.find(".digor").remove(),cuForm.find("input[type='password']").parent().remove(),e.children().each(function(){jQuery(this).hasClass("dig_otp_block")||0!==jQuery(this).find(".digcon").length||0!==jQuery(this).find(".dig_bb_wp_otp_field").length||jQuery(this).hide()}),cuForm.find(".bbp-submit-wrapper").hide(),cuForm.append(cuForm.find(".dig_otp_block")),cuForm.find(".dig_otp_block").addClass("dig_otp_blk"),void cuForm.find(".bbp-remember-me").hide();cuForm.find(".digor").remove(),cuForm.find(".lost_password").hide(),cuForm.find("input[type='submit']").hide(),cuForm.find(".dig-custom-field-type-captcha").hide(),wc_checkout.length&&(wc_checkout.find('input[type="password"]').parent().remove(),wc_checkout.find(".form-row-first").removeClass("form-row-first"),wc_checkout.find("#rememberme").closest("label").remove(),wc_checkout.find('[name="login"]').remove()),cuForm.find(".form-row").find("input[type='password']").each(function(e){var i=jQuery(this).closest(".form-row");1!=e&&1!=i.attr("otp")?i.remove():1==e&&i.find("label").text(dig_mdet.MobileNumber+" *")})}function updateProfileCallback(e){if(showDigitsLoader(!0),"PARTIALLY_AUTHENTICATED"===e.status){var i=e.code,t=e.state;updateProfileStatus=1,jQuery("form#your-profile #dig_prof_code").val(i),jQuery("form#your-profile #dig_prof_csrf").val(t),jQuery("form#your-profile input[type='submit']").click()}else"NOT_AUTHENTICATED"===e.status||e.status}function updateCheckoutDetails(e){if(showDigitsLoader(!0),"PARTIALLY_AUTHENTICATED"===e.status){var i=e.code,t=e.state;jQuery(".dig_billing_otp_signup").hide(),jQuery("#digorbilling").hide(),jQuery("#dig_wc_bill_code").val(i),jQuery("#dig_wc_bill_csrf").val(t)}}function forgotPasswordCallBack(e){if(showDigitsLoader(!0),"PARTIALLY_AUTHENTICATED"===e.status){var i=e.code,t=e.state;forgotPassChange=1,user_login.parent().parent().hide(),user_login.attr("name","forgotmail"),jQuery("#digits_wc_code").val(i),jQuery("#digits_wc_csrf").val(t),jQuery("form.lost_reset_password .changePassword").show()}else"NOT_AUTHENTICATED"===e.status||e.status}function verifyOtp(e,i,t,r,o){dismissLoader=!1,hideDigMessage(),loader.show(),1==isFirebase?verify_firebase_otp(e,i,t,r,o):verify_cust_otp(e,i,t,r,o,-1)}function verify_firebase_otp(i,t,r,o,d){if(t=t.replace(/^0+/,""),i=i.replace(/^0+/,""),null==o||0==o.length)return loader.hide(),void showDigMessage(dig_mdet.InvalidOTP);window.confirmationResult.confirm(o).then(function(e){firebase.auth().currentUser.getIdToken(!0).then(function(e){window.verifyingCode=!1,window.confirmationResult=null,jQuery("#dig_ftok_fbase").remove(),tokenCon.append("<input type='hidden' name='dig_ftoken' value='"+e+"' id='dig_ftok_fbase' />"),verify_cust_otp(i,t,r,o,d,e)}).catch(function(e){loader.hide(),showDigMessage(e)})}).catch(function(e){loader.hide(),showDigMessage(dig_mdet.InvalidOTP)})}function verify_cust_otp(e,i,t,r,o,d){if(lastotpcountrycode!=e||lastotpmobileNo!=i||lastotpDtype!=r){lastotpcountrycode=e,lastotpmobileNo=i,lastotpDtype=r;var n=0;jQuery("#rememberme").length&&(n=0<jQuery("#rememberme:checked").length),jQuery.ajax({type:"post",url:dig_mdet.ajax_url,data:{action:"digits_verifyotp_login",countrycode:e,mobileNo:i,otp:r,dig_ftoken:d,csrf:t,dtype:o,rememberMe:n},success:function(e){if(isJSON(e))if(e.code){if(e.redirect)return void(window.location.href=e.redirect);e=e.code}else e=e;else e=e.trim();if(11!=e&&loader.hide(),1011!=e)if(1013!=e)if(-99!=e)if(0!=e)if(11!=e)if(-1!=e||2==o||11==o)if(1==e&&2==o||1==e&&11==o)showDigMessage(dig_mdet.MobileNumberalreadyinuse);else if(2==o)1==verifybpotp?(verifybpotp=0,dig_bp_btn=2,jQuery("#buddypress #signup_form").find("input[name='signup_submit']").click()):2==subitumotp?(submitumform=1,jQuery(".um-register").find("form").submit()):(registerstatus=1,curRegForm.submit());else{if(3==o)return void(1==forgotpassihc?(jQuery("#digits_password_ihc_cont").show().find("input").attr("required","required"),jQuery("#digits_cpassword_ihc_cont").show().find("input").attr("required","required"),forgotpassihc=2):(forgotPassChange=1,user_login.parent().parent().hide(),jQuery("#digit_forgot_otp_container").hide(),jQuery(".dig_wc_forgot_resend").hide(),user_login.attr("name","forgotmail"),jQuery("form.lost_reset_password .changePassword").show(),update_time_button.val(prv_forg_wc),update_time_button.text(prv_forg_wc)));11==o&&(1==wpuseredit?(updateProfileStatus=1,jQuery("form#your-profile input[type='submit']").click()):1==bpuseredit?jQuery("#buddypress").find("form").unbind("submit").submit():2==ihcedform?(submiticform=1,jQuery(".ihc-form-create-edit").submit()):(updateAccountStatus=1,jQuery("form.woocommerce-EditAccountForm").submit()))}else showDigMessage(dig_mdet.ErrorPleasetryagainlater);else ihcloginform.length||0<subitumotp?document.location.href="/":jQuery("#digits_redirect_page").length?window.location.href=jQuery("#digits_redirect_page").val():window.location.href=dig_mdet.uri;else showDigMessage(dig_mdet.InvalidOTP);else showDigMessage(dig_mdet.invalidcountrycode);else showDigMessage(dig_mdet.error);else showDigMessage(dig_mdet.error)}})}else loader.hide()}function updateAccountCallback(e){if(showDigitsLoader(!0),"PARTIALLY_AUTHENTICATED"===e.status){var i=e.code,t=e.state;updateAccountStatus=1,jQuery("form.woocommerce-EditAccountForm #dig_wc_prof_code").val(i),jQuery("form.woocommerce-EditAccountForm #dig_wc_prof_csrf").val(t),jQuery("form.woocommerce-EditAccountForm input[type='submit']").click()}else"NOT_AUTHENTICATED"===e.status||e.status}function updateTime(i){tokenCon=i.closest("form"),update_time_button&&(update_time_button.is("input")?update_time_button.attr("value",dig_mdet.SubmitOTP):update_time_button.text(dig_mdet.SubmitOTP)),i.attr("dis",1).addClass("dig_resendotp_disabled").show().find("span").show();var t=i.find("span");t.text(convToMMSS(resendTime));var r=0,o=setInterval(function(){var e=resendTime-r;t.text(convToMMSS(e)),resendTime<=++r&&(clearInterval(o),i.removeAttr("dis").removeClass("dig_resendotp_disabled").find("span").hide(),r=0)},1e3,!0)}function convToMMSS(e){var i=parseInt(e,10),t=Math.floor(i/3600),r=Math.floor((i-3600*t)/60),o=i-3600*t-60*r;return r<10&&(r="0"+r),o<10&&(o="0"+o),"("+r+":"+o+")"}function mobilePaddingLeft(e){return 1==dig_mdet.dig_hide_ccode?"0.75em":e}function showDigMessage(e){jQuery(".dig_popmessage").length?(jQuery(".dig_popmessage").find(".dig_lase_message").text(e),jQuery(".dig_popmessage").is(":visible")||jQuery(".dig_popmessage").slideDown("fast")):(jQuery("body").append("<div class='dig_popmessage'><div class='dig_firele'><img src='"+dig_mdet.face+"'></div><div class='dig_lasele'><div class='dig_lase_snap'>"+dig_mdet.ohsnap+"</div><div class='dig_lase_message'>"+e+"</div></div><img class='dig_popdismiss' src='"+dig_mdet.cross+"'></div>"),jQuery(".dig_popmessage").slideDown("fast"))}function hideDigMessage(){jQuery(".dig_popmessage").fadeOut(120)}function updateRegisterDetails(e){if(showDigitsLoader(!0),"PARTIALLY_AUTHENTICATED"===e.status){var i=e.code,t=e.state;jQuery("#dig_bp_reg_code").val(i),jQuery("#dig_bp_reg_csrf").val(t),dig_bp_btn=2,jQuery("#buddypress").find("form").submit()}}function updateBPAccountDetails(e){if(showDigitsLoader(!0),"PARTIALLY_AUTHENTICATED"===e.status){var i=e.code,t=e.state;jQuery("#dig_bp_ea_code").val(i),jQuery("#dig_bp_ea_csrf").val(t),dig_bp_btn=2,jQuery("#buddypress").find("form").unbind("submit").submit()}}function updateIHCAccountDetails(e){if(showDigitsLoader(!0),"PARTIALLY_AUTHENTICATED"===e.status){var i=e.code,t=e.state;jQuery("#dig_ihc_ea_code").val(i),jQuery("#dig_ihc_ea_csrf").val(t),submiticform=1,jQuery(".ihc-form-create-edit").submit()}}function submitUMRegform(e){if(showDigitsLoader(!0),"PARTIALLY_AUTHENTICATED"===e.status){var i=e.code,t=e.state;jQuery("#digits_um_code").val(i),jQuery("#digits_um_csrf").val(t),submitumform=1,jQuery(".um-register").find("form").submit()}}function formatMobileNumber(e){return e.replace(/^0+/,"")}function validateCustomFields(e){var s=!1;return e.attr("wait")?(showDigMessage(e.attr("wait")),!1):e.attr("error")?(showDigMessage(e.attr("error")),!1):(e.find("input,textarea,select").each(function(){if(jQuery(this).attr("required")){if(!jQuery(this).is(":visible"))return;var e=jQuery(this),i=e.attr("dtype");if(i&&"range"==i){var t=e.val().split("-");if(!t[1])return s=!0,e.val(""),!1}if(e.attr("date"))if("range"!=i){var r=new Date(e.val());if(!isDateValid(r))return s=!0,e.val(""),!1}else{var o=new Date(t[0]),d=new Date(t[1]);if(!isDateValid(o)||!isDateValid(d))return s=!0,e.val(""),!1}else if(e.is(":checkbox")||e.is(":radio")){if(!e.is(":checked")&&!jQuery('input[name="'+e.attr("name")+'"]:checked').val())return!(s=!0)}else{var n=e.val();if(null==n||0==n.length)return!(s=!0)}}}),s?(showDigMessage(dig_mdet.fillAllDetails),!1):!e.find(".dig_opt_mult_con_tac").find(".dig_input_error").length||(showDigMessage(dig_mdet.accepttac),!1))}function hideDigitsLoader(){jQuery("body").addClass("dig_low_overlay"),loader.show(),hideDigMessage()}function showDigitsLoader(e){jQuery("body").removeClass("dig_low_overlay"),e&&loader.hide()}function isJSON(e){"string"!=typeof e&&(e=JSON.stringify(e));try{return JSON.parse(e),!0}catch(e){return!1}}});